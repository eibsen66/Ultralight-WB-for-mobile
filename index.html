<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>W&B for Ultralight Version 2.04 by Egill Ibsen (Web)</title>
  <meta name="theme-color" content="#0b1020">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="W&B">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="app-header">
    <div class="title">
      <div class="app-name">W&amp;B for Ultralight Version 2.04 by Egill Ibsen</div>
      <div class="app-sub">Works in Safari/Chrome. For offline install, host on HTTPS and Add to Home Screen.</div>
    </div>
  </header>

  <main id="app">
    <div id="jsWarning" class="js-warning">
      JavaScript is not running. If you opened this from a file preview, open it in Safari/Chrome (Share - Open in Safari).
    </div>

    <section class="card">
      <div class="card-title">Aircraft</div>

      <div class="row wrap aircraft-type-row">
        <div class="field">
          <label for="acType">A/C Type</label>
          <select id="acType"></select>
          <div class="hint">Select a preset or choose Add Aircraft type to create your own entry.</div>
        </div>

        <div class="field tight tw-field">
          <label class="checkbox tailwheel"><input id="isTailwheel" type="checkbox"> Tailwheel</label>
          <div id="tailwheelHint" class="hint" style="margin-top:4px;"></div>
</div>

        <div class="field tight tandem-field">
          <label class="checkbox tandem"><input id="isTandem" type="checkbox"> Tandem</label>
          <div id="tandemHint" class="hint" style="margin-top:4px;">Tandem seating hides fwd/aft seat selectors.</div>

        <div class="field fuel-field">
          <label for="fuelType">Fuel type</label>
          <select id="fuelType">
            <option value="mogas_e10_95" selected>Mogas 95 E10 (typical, 15 C)</option>
            <option value="avgas_100ll">Avgas 100LL (typical, 15 C)</option>
            <option value="mogas_e5_95">Mogas 95 E5/E0 (typical, 15 C)</option>
            <option value="custom">Custom (edit density)</option>
          </select>
          <div class="hint">Density varies with temperature/supplier</div>
        </div>

        </div>
      </div>

      <div class="row wrap">
        <div class="field">
          <label for="reg">Aircraft Registration</label>
          <input id="reg" type="text" maxlength="20" placeholder="e.g. TF-ABC">
          <div class="hint">&nbsp;</div>
        </div>

        <div class="field">
          <label for="fuelCap">Fuel Capacity (L)</label>
          <input id="fuelCap" type="number" inputmode="decimal" step="0.1">
          <div class="hint">&nbsp;</div>
        </div>

        <div class="field">
          <label for="mtow">MTOW (kg)</label>
          <input id="mtow" type="number" inputmode="decimal" step="0.1">
          <div class="hint">&nbsp;</div>
        </div>

        <div class="field">
          <label for="cgAft">CG aft limit (m FoD)</label>
          <input id="cgAft" type="number" inputmode="decimal" step="0.001">
          <div class="hint">&nbsp;</div>
        </div>

        <div class="field">
          <label for="cgFwd">CG fwd limit (m FoD)</label>
          <input id="cgFwd" type="number" inputmode="decimal" step="0.001">
          <div class="hint">&nbsp;</div>
        </div>

        <div class="field tight">
          <label>&nbsp;</label>
          <button id="resetLimits" class="btn secondary">Reset to preset</button>
        </div>
      </div>

      <details id="acData" class="details">
        <summary>Aircraft data (arms, fuel density, limits)</summary>
        <div class="details-body">
          <div class="grid4">
            <div class="field">
              <label for="armNose" id="armNoseLabel">Arm nose wheel (m FoD)</label>
              <input id="armNose" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="armMainL">Arm left main (m)</label>
              <input id="armMainL" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="armMainR">Arm right main (m)</label>
              <input id="armMainR" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="idxDiv">Moment index divisor</label>
              <input id="idxDiv" type="number" inputmode="decimal" step="0.001">
            </div>
          </div>

          <div class="grid4">
            <div class="field">
              <label for="armPilot">Arm pilot seat (m FoD)</label>
              <input id="armPilot" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="armPax">Arm passenger seat (m FoD)</label>
              <input id="armPax" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="armFuel">Arm fuel (m, AoD negative)</label>
              <input id="armFuel" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="armBag">Arm baggage (m, AoD negative)</label>
              <input id="armBag" type="number" inputmode="decimal" step="0.001">
            </div>
          </div>

          <div class="grid4">
            <div class="field">
              <label for="fuelDens">Fuel density (kg/L)</label>
              <input id="fuelDens" type="number" inputmode="decimal" step="0.001">
            </div>
            <div class="field">
              <label for="seatMin">Seat min (kg)</label>
              <input id="seatMin" type="number" inputmode="decimal" step="0.1">
            </div>
            <div class="field">
              <label for="seatMax">Seat max (kg)</label>
              <input id="seatMax" type="number" inputmode="decimal" step="0.1">
            </div>
            <div class="field">
              <label for="seatTotalMin">Total seat min (kg)</label>
              <input id="seatTotalMin" type="number" inputmode="decimal" step="0.1">
            </div>
          </div>

          <div class="grid4">
            <div class="field">
              <label for="bagMax">Baggage max (kg)</label>
              <input id="bagMax" type="number" inputmode="decimal" step="0.1">
            </div>
            <div class="field">
              <label>&nbsp;</label>
              <button id="btnClearAircraftData" class="btn secondary">Clear aircraft data</button>
            </div>
          </div>

          <div class="mini card-sub" id="acDataHint"></div>
        </div>
      </details>

      <div class="banner" id="banner"></div>
    </section>

    <section class="grid2">
      <section class="card">
        <div class="card-title">1) Empty baseline from wheel loads</div>
        <div class="row">
          <div class="field">
            <label for="noseLoad" id="noseLoadLabel">Nose wheel wt (kg)</label>
            <input id="noseLoad" type="number" inputmode="decimal" step="0.1">
          </div>
          <div class="field">
            <label for="leftLoad">Left main load (kg)</label>
            <input id="leftLoad" type="number" inputmode="decimal" step="0.1">
          </div>
          <div class="field">
            <label for="rightLoad">Right main load (kg)</label>
            <input id="rightLoad" type="number" inputmode="decimal" step="0.1">
          </div>
        </div>
        <div class="row">
          <button id="btnEmptyFromWheels" class="btn">Compute EMPTY from wheel loads</button>
          <button id="btnCopyEmpty" class="btn secondary">Copy computed EMPTY to baseline</button>
        </div>

        <div class="mini card-sub" id="emptyFromWheelsSummary"></div>
      </section>

      <section class="card">
        <div class="card-title">2) Empty baseline values</div>
        <div class="row">
          <div class="field">
            <label for="emptyWt">Empty weight (kg)</label>
            <input id="emptyWt" type="number" inputmode="decimal" step="0.1">
          </div>
          <div class="field">
            <label for="emptyMoment">Empty moment (kg*m)</label>
            <input id="emptyMoment" type="number" inputmode="decimal" step="0.1">
          </div>
        </div>

        <div class="row wrap">
          <label class="checkbox">
            <input id="includeFixed" type="checkbox">
            Include FIXED ITEMS (only if NOT already in baseline)
          </label>
        </div>

        <div class="mini card-sub" id="fixedItemsInfo"></div>
      </section>
    </section>

    <section class="card">
      <div class="card-title">3) Loading</div>

      <div class="grid4">
        <div class="field">
          <label for="pilotKg">Pilot (kg)</label>
          <input id="pilotKg" type="number" inputmode="decimal" step="0.1">
        </div>
        <div class="field">
          <label for="paxKg">Passenger (kg)</label>
          <input id="paxKg" type="number" inputmode="decimal" step="0.1">
        </div>
        <div class="field">
          <label for="fuelL">Fuel (litres)</label>
          <input id="fuelL" type="number" inputmode="decimal" step="0.1">
        </div>
        <div class="field">
          <label for="baggageKg">Baggage (kg)</label>
          <input id="baggageKg" type="number" inputmode="decimal" step="0.1">
        </div>
      </div>

      <div class="grid4">
        <div class="field" id="pilotSeatField">
          <label for="pilotSeat">Pilot seat position</label>
          <select id="pilotSeat">
            <option value="aft">aft</option>
            <option value="fwd">fwd</option>
          </select>
        </div>
        <div class="field" id="paxSeatField">
          <label for="paxSeat">Pax seat position</label>
          <select id="paxSeat">
            <option value="aft">aft</option>
            <option value="fwd">fwd</option>
          </select>
        </div>
        <div class="field tight">
          <label>&nbsp;</label>
          <button id="btnComputeLoaded" class="btn">Compute LOADED W&amp;B</button>
        </div>
        <div class="field tight">
          <label>&nbsp;</label>
          <button id="btnToggleChart" class="btn secondary">Show W&amp;B chart</button>
        </div>
      </div>

      <div class="extra">
        <div class="extra-title">Extra items (optional) - 3 quick rows</div>
        <div class="extra-grid">
          <div class="extra-h">Name</div>
          <div class="extra-h">Weight (kg)</div>
          <div class="extra-h">Arm (m)</div>

          <input id="exName1" type="text" maxlength="80">
          <input id="exWt1" type="number" inputmode="decimal" step="0.1">
          <input id="exArm1" type="number" inputmode="decimal" step="0.001">

          <input id="exName2" type="text" maxlength="80">
          <input id="exWt2" type="number" inputmode="decimal" step="0.1">
          <input id="exArm2" type="number" inputmode="decimal" step="0.001">

          <input id="exName3" type="text" maxlength="80">
          <input id="exWt3" type="number" inputmode="decimal" step="0.1">
          <input id="exArm3" type="number" inputmode="decimal" step="0.001">
        </div>

        <div class="row">
          <div class="mini" id="moreCount">More items: 0</div>
          <div class="spacer"></div>
          <button id="btnMoreItems" class="btn secondary">More...</button>
          <button id="btnClearExtras" class="btn secondary">Clear all extra items</button>
        </div>
      </div>

      <div class="row">
        <button id="btnPrint" class="btn">Print/Export Loadsheet (PDF)</button>
        <button id="btnHelp" class="btn secondary">Help</button>
      </div>
    </section>

    <section class="grid2">
      <section class="card">
        <div class="card-title">Results</div>
        <pre id="results" class="results"></pre>
      </section>

      <section class="card" id="chartCard" style="display:none;">
        <div class="card-title">W&amp;B chart</div>
        <canvas id="chart" width="640" height="480" class="chart"></canvas>
        <div class="mini card-sub">Updated automatically when inputs change.</div>
      </section>
    </section>

    <!-- More items modal -->
    <div id="modalBackdrop" class="modal-backdrop" style="display:none;"></div>
    <div id="moreModal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="moreTitle">
      <div class="modal-head">
        <div id="moreTitle" class="modal-title">Extra items - additional list</div>
        <button id="btnCloseMore" class="btn secondary">Close</button>
      </div>
      <div class="modal-body">
        <div class="mini">Add as many items as needed here. These are added to the 3 quick rows.</div>
        <div class="modal-table" id="moreTable"></div>
        <div class="row">
          <button id="btnAddMoreRow" class="btn secondary">Add row</button>
          <div class="spacer"></div>
          <button id="btnMoreOK" class="btn">OK</button>
        </div>
      </div>
    </div>

    <!-- Help modal -->
    <div id="helpModal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
      <div class="modal-head">
        <div id="helpTitle" class="modal-title">Help</div>
        <button id="btnCloseHelp" class="btn secondary">Close</button>
      </div>
      <div class="modal-body">
        <pre id="helpText" class="help"></pre>
      </div>
    </div>
  </main>

  <script src="app.js"></script>
</body>
</html>
